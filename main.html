<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MineForces</title>
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./css/bootstrap-theme.min.css">
  </head>
  <body>
    <div id="message">
    </div>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script>
      var crawler = require('./js/crawler.js');
      crawler = new crawler.Crawler();
      crawler.load(function(problems) {
      //crawler.pullProblems(function(problems) {
        var accepted = 0;
        var total = 0;
        for (var key in problems) {
          if (problems[key].accepted) {
            ++accepted;
          }
          ++total;
        }
        $('#message').append(accepted + '/' + total + '<br/>');
        $('#message').append('<hr/>');
        var tagCnt = {};
        for (var key in problems) {
          if (problems[key].accepted) {
            for (var i in problems[key].tags) {
              var tag = problems[key].tags[i];
              if (tag in tagCnt) {
                ++tagCnt[tag];
              } else {
                tagCnt[tag] = 1;
              }
            }
          }
        }
        for (var tag in tagCnt) {
          $('#message').append(tag + ': ' + tagCnt[tag] + '<br/>');
        }
        $('#message').append('<hr/>');
        var selected = [];
        var diff = [5000, 4000, 3000, 2000, 1000, 500, 200, 100, 0];
        for (var k = 0; k < 100; ++k) {
          var select = [];
          for (var i = 0; i + 1 < diff.length; ++i) {
            var current = '';
            for (var key in problems) {
              if (selected.indexOf(key) > -1) {
                continue;
              }
              if (select.indexOf(key) > -1) {
                continue;
              }
              if (problems[key].acceped) {
                continue;
              }
              if (key.length !== 4) {
                continue;
              }
              if (diff[i + 1] <= problems[key].solved && problems[key].solved <= diff[i]) {
                if (current === '' || problems[current].solved < problems[key].solved) {
                  current = key;
                }
              }
            }
            if (current === '') {
              break;
            }
            console.log(current);
            select.push(current);
          }
          if (select.length + 1 !== diff.length) {
            break;
          }
          console.log(select);
          for (var j in select) {
            selected.push(select[j]);
            $('#message').append(select[j] + ' ');
          }
          $('#message').append('<br/>');
        }
      });
    </script>
  </body>
</html>